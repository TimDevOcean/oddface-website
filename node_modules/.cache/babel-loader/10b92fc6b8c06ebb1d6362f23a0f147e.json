{"ast":null,"code":"import _regeneratorRuntime from\"/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import commerce from'./lib/commerce';import NavBar from'./components/nav/NavBar';import{Routes,Route}from'react-router-dom';import Header from'./components/Header';import Checkout from'./components/checkout/Checkout';import Home from'./components/home/Home';import ProductView from'./components/product/ProductView';import Shop from'./components/shop/Shop';import Loader from\"./components/loader/Loader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),orderInfo=_useState6[0],setOrderInfo=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),orderError=_useState8[0],setOrderError=_useState8[1];var fetchProducts=function fetchProducts(){commerce.products.list().then(function(products){setProducts(products.data);}).catch(function(error){console.log('There was an error fetching the products',error);});};var handleAddToCart=function handleAddToCart(productId,quantity){var option=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};commerce.cart.add(productId,quantity,_objectSpread({},option)).then(function(item){setCart(item.cart);}).catch(function(error){console.error('There was an error adding the item to the cart',error);});};var fetchCart=function fetchCart(){commerce.cart.retrieve().then(function(cart){setCart(cart);}).catch(function(error){console.log('There was an error fetching the cart',error);});};var handleRemoveFromCart=function handleRemoveFromCart(lineItemId){commerce.cart.remove(lineItemId).then(function(resp){setCart(resp.cart);}).catch(function(error){console.error('There was an error removing the item from the cart',error);});};var handleUpdateCartQty=function handleUpdateCartQty(lineItemId,quantity){commerce.cart.update(lineItemId,{quantity:quantity}).then(function(resp){setCart(resp.cart);}).catch(function(error){console.log('There was an error updating the cart items',error);});};var handleEmptyCart=function handleEmptyCart(){commerce.cart.empty().then(function(resp){setCart(resp.cart);}).catch(function(error){console.error('There was an error emptying the cart',error);});};var refreshCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var newCart;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return commerce.cart.refresh();case 2:newCart=_context.sent;setCart(newCart);case 4:case\"end\":return _context.stop();}}},_callee);}));return function refreshCart(){return _ref.apply(this,arguments);};}();var handleCheckout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(checkoutId,orderData){var incomingOrder;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return commerce.checkout.capture(checkoutId,orderData);case 3:incomingOrder=_context2.sent;setOrderInfo(incomingOrder);refreshCart();_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);setOrderError(_context2.t0.data&&_context2.t0.data.error&&_context2.t0.data.error.message||\"There is an error\");case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function handleCheckout(_x,_x2){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchProducts();fetchCart();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(NavBar,{cart:cart,onUpdateCartQty:handleUpdateCartQty,onRemoveFromCart:handleRemoveFromCart,onEmptyCart:handleEmptyCart})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/shop\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{title:\"Shop\"}),/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:products===''?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(Shop,{products:products,onAddToCart:handleAddToCart})})]})}),/*#__PURE__*/_jsx(Route,{path:\"/product-view/:id\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{title:\"Product\"}),/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsx(ProductView,{addToCart:handleAddToCart})})]})}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{title:\"Checkout\"}),/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsx(Checkout,{orderInfo:orderInfo,orderError:orderError,cart:cart,handleCheckout:handleCheckout})})]})})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","commerce","NavBar","Routes","Route","Header","Checkout","Home","ProductView","Shop","Loader","App","products","setProducts","cart","setCart","orderInfo","setOrderInfo","orderError","setOrderError","fetchProducts","list","then","data","catch","error","console","log","handleAddToCart","productId","quantity","option","add","item","fetchCart","retrieve","handleRemoveFromCart","lineItemId","remove","resp","handleUpdateCartQty","update","handleEmptyCart","empty","refreshCart","refresh","newCart","handleCheckout","checkoutId","orderData","checkout","capture","incomingOrder","message"],"sources":["/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport commerce from './lib/commerce';\nimport NavBar from './components/nav/NavBar';\nimport { Routes, Route } from 'react-router-dom';\nimport Header from './components/Header';\nimport Checkout from './components/checkout/Checkout';\nimport Home from './components/home/Home';\nimport ProductView from './components/product/ProductView';\nimport Shop from './components/shop/Shop';\nimport Loader from \"./components/loader/Loader\";\n\n\n\nconst App = () => {\n  const [products, setProducts] = useState('');\n  const [cart, setCart] = useState({});\n  const [orderInfo, setOrderInfo] = useState({});\n  const [orderError, setOrderError] = useState(\"\");\n\n  const fetchProducts = () => {\n    commerce.products.list().then((products) => {\n      setProducts(products.data);\n    }).catch((error) => {\n      console.log('There was an error fetching the products', error)\n    });\n  }\n\n  const handleAddToCart = (productId, quantity, option = {}) => {\n    commerce.cart.add(productId, quantity, {...option}).then((item) => {\n      setCart(item.cart);\n    }).catch((error) => {\n      console.error('There was an error adding the item to the cart', error);\n    });\n  }\n\n  const fetchCart = () => {\n    commerce.cart.retrieve().then((cart) => {\n      setCart(cart);\n    }).catch((error) => {\n      console.log('There was an error fetching the cart', error);\n    });\n  }\n\n  const handleRemoveFromCart = (lineItemId) => {\n    commerce.cart.remove(lineItemId).then((resp) => {\n      setCart(resp.cart);\n    }).catch((error) => {\n      console.error('There was an error removing the item from the cart', error);\n    });\n  }\n\n  const handleUpdateCartQty = (lineItemId, quantity) => {\n    commerce.cart.update(lineItemId, { quantity }).then((resp) => {\n      setCart(resp.cart);\n    }).catch((error) => {\n      console.log('There was an error updating the cart items', error);\n    });\n  }\n\n  const handleEmptyCart = () => {\n    commerce.cart.empty().then((resp) => {\n      setCart(resp.cart);\n    }).catch((error) => {\n      console.error('There was an error emptying the cart', error);\n    });\n  }\n\n  const refreshCart = async () => {\n    const newCart = await commerce.cart.refresh();\n    setCart(newCart);\n  };\n\n  const handleCheckout = async (checkoutId, orderData) => {\n    try {\n      const incomingOrder = await commerce.checkout.capture(\n        checkoutId,\n        orderData\n      );\n\n      setOrderInfo(incomingOrder);\n\n      refreshCart();\n    } catch (error) {\n      setOrderError(\n        (error.data && error.data.error && error.data.error.message) ||\n          \"There is an error\"\n      );\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n    fetchCart();\n  }, []);\n\n  return (\n    <div className=\"app\">\n    <div className=''>\n      <NavBar \n        cart={cart}\n        onUpdateCartQty={handleUpdateCartQty}\n        onRemoveFromCart={handleRemoveFromCart}\n        onEmptyCart={handleEmptyCart}\n      />\n    </div>\n  \n    <Routes>\n      <Route path=\"/\" element={<Home />} />\n\n      <Route path=\"/shop\" element={\n        <>\n        <Header title=\"Shop\" />\n        <div className='app-container'>\n\n        {products === '' ? \n          <Loader /> :\n          <Shop \n            products={products}\n            onAddToCart={handleAddToCart}\n          />\n        }\n        </div>\n        </> \n        }\n      />\n\n      <Route path=\"/product-view/:id\" element={\n        <>\n        <Header title=\"Product\" />\n        <div className='app-container'>\n          <ProductView addToCart={handleAddToCart}/>\n        </div>\n        </> }\n      />\n\n      <Route path=\"/checkout\" element={\n        <>\n        <Header title=\"Checkout\" />\n        <div className='app-container'>\n          <Checkout \n              orderInfo={orderInfo}\n              orderError={orderError}\n              cart={cart}\n              handleCheckout={handleCheckout}\n          />\n        </div>\n        </> }\n      />\n    </Routes>\n    </div>\n  );\n  \n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}