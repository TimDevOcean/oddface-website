{"ast":null,"code":"import _objectSpread from\"/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import commerce from\"../../lib/commerce\";import Loader from\"../loader/Loader\";import{Grid,Container}from'@mui/material';import\"./style.css\";import ShoppingBagOutlinedIcon from'@mui/icons-material/ShoppingBagOutlined';// import ShoppingBagSharpIcon from '@mui/icons-material/ShoppingBagSharp';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var createMarkup=function createMarkup(text){return{__html:text};};var ProductView=function ProductView(_ref){var _product$variant_grou,_product$variant_grou2,_product$variant_grou3;var addToCart=_ref.addToCart;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),quantity=_useState4[0],setQuantity=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),originalPrice=_useState8[0],setOriginalPrice=_useState8[1];var fetchProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var response,name,price,assets,image,variant_groups,quantity,description;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return commerce.products.retrieve(id);case 2:response=_context.sent;name=response.name,price=response.price,assets=response.assets,image=response.image,variant_groups=response.variant_groups,quantity=response.quantity,description=response.description;console.log(response);setOriginalPrice(price.raw);setProduct({id:id,name:name,quantity:quantity,variant_groups:variant_groups,description:description,assets:assets,src:image.url,price:price.formatted_with_code});case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchProduct(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){var id=window.location.pathname.split(\"/\");fetchProduct(id[2]);},[]);var handleQuantity=function handleQuantity(param){if(param===\"decrease\"&&quantity>1){setQuantity(quantity-1);}if(param===\"increase\"&&quantity<10){setQuantity(quantity+1);}};var priceCalculator=function priceCalculator(optionPrice){if(optionPrice===originalPrice){return product.price;}var priceArray=product.price.split(\" \");var total=originalPrice+optionPrice;return\"\".concat(total,\" \").concat(priceArray[1]);};var updateProduct=function updateProduct(optionPrice,src,_ref3){var id=_ref3.id,variantId=_ref3.variantId;setProduct(_objectSpread(_objectSpread({},product),{},{price:priceCalculator(optionPrice),src:src,option:{variantId:id}}));console.log(id);};var getImageUrl=function getImageUrl(assetId){var relatedAsset=product.assets.find(function(pro){return pro.id===assetId;});return(relatedAsset===null||relatedAsset===void 0?void 0:relatedAsset.url)||\"\";};return/*#__PURE__*/_jsx(Container,{className:\"product-view\",children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(\"img\",{className:\"product-view-img\",onLoad:function onLoad(){setLoading(false);},src:product.src,alt:product.name}),loading&&/*#__PURE__*/_jsx(Loader,{}),(_product$variant_grou=product.variant_groups)!==null&&_product$variant_grou!==void 0&&_product$variant_grou.length?/*#__PURE__*/_jsx(\"h4\",{children:\"Select variants.\"}):null,/*#__PURE__*/_jsx(\"div\",{className:\"variants colors\",children:(_product$variant_grou2=product.variant_groups)!==null&&_product$variant_grou2!==void 0&&_product$variant_grou2.length?(_product$variant_grou3=product.variant_groups)===null||_product$variant_grou3===void 0?void 0:_product$variant_grou3.map(function(group){return group.options.map(function(option){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsx(Grid,{xs:2,md:2,item:true,children:option.name},option.id)},option.id)});});}):null})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(\"span\",{className:\"product-view-title\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"product-description\",dangerouslySetInnerHTML:createMarkup(product.description)}),/*#__PURE__*/_jsx(\"p\",{className:\"product-view-price\",children:product.price}),/*#__PURE__*/_jsxs(Grid,{container:true,className:\"product-view-actions\",spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:1.5,children:/*#__PURE__*/_jsx(\"button\",{className:\"product-view-qty-btn\",onClick:function onClick(){handleQuantity(\"decrease\");},children:\"-\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:1,children:/*#__PURE__*/_jsx(\"p\",{className:\"product-view-qty\",children:quantity})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:1.5,children:/*#__PURE__*/_jsx(\"button\",{className:\"product-view-qty-btn\",onClick:function onClick(){handleQuantity(\"increase\");},children:\"+\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(\"button\",{className:\"product-view-cart-btn\",onClick:function onClick(){addToCart(product.id,quantity,product.option);},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Add to cart\"}),\" \",/*#__PURE__*/_jsx(ShoppingBagOutlinedIcon,{className:\"bag-icon\"})]})})]})]})]})});};export default ProductView;","map":{"version":3,"names":["useState","useEffect","commerce","Loader","Grid","Container","ShoppingBagOutlinedIcon","createMarkup","text","__html","ProductView","addToCart","product","setProduct","quantity","setQuantity","loading","setLoading","originalPrice","setOriginalPrice","fetchProduct","id","products","retrieve","response","name","price","assets","image","variant_groups","description","console","log","raw","src","url","formatted_with_code","window","location","pathname","split","handleQuantity","param","priceCalculator","optionPrice","priceArray","total","updateProduct","variantId","option","getImageUrl","assetId","relatedAsset","find","pro","length","map","group","options"],"sources":["/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/src/components/product/ProductView.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport commerce from \"../../lib/commerce\";\nimport Loader from \"../loader/Loader\";\nimport { Grid, Container } from '@mui/material';\nimport \"./style.css\";\n\nimport ShoppingBagOutlinedIcon from '@mui/icons-material/ShoppingBagOutlined';\n// import ShoppingBagSharpIcon from '@mui/icons-material/ShoppingBagSharp';\n\nconst createMarkup = (text) => {\n    return { __html: text };\n  };\n\nconst ProductView = ({ addToCart }) => {\n\n    const [product, setProduct] = useState({});\n    const [quantity, setQuantity] = useState(1);\n    const [loading, setLoading] = useState(true);\n    const [originalPrice, setOriginalPrice] = useState(0);\n  \n    const fetchProduct = async (id) => {\n\n      const response = await commerce.products.retrieve(id);\n      const { name, price, assets, image, variant_groups, quantity, description } = response;\n      console.log(response);\n\n      setOriginalPrice(price.raw);\n      setProduct({\n        id,\n        name,\n        quantity,\n        variant_groups,\n        description,\n        assets,\n        src: image.url,\n        price: price.formatted_with_code,\n      });\n    };\n  \n    useEffect(() => {\n      const id = window.location.pathname.split(\"/\");\n      fetchProduct(id[2]);\n    }, []);\n  \n    const handleQuantity = (param) => {\n      if (param === \"decrease\" && quantity > 1) {\n        setQuantity(quantity - 1);\n      }\n      if (param === \"increase\" && quantity < 10) {\n        setQuantity(quantity + 1);\n      }\n    };\n  \n    const priceCalculator = (optionPrice) => {\n        if (optionPrice === originalPrice) {\n          return product.price;\n        }\n    \n        const priceArray = product.price.split(\" \");\n        const total = originalPrice + optionPrice;\n        return `${total} ${priceArray[1]}`;\n      };\n    \n      const updateProduct = (optionPrice, src, { id, variantId }) => {\n        setProduct({\n          ...product,\n          price: priceCalculator(optionPrice),\n          src,\n          option: { variantId: id },\n        });\n        console.log(id)\n      };\n    \n      const getImageUrl = (assetId) => {\n        const relatedAsset = product.assets.find((pro) => pro.id === assetId);\n        return relatedAsset?.url || \"\";\n      };\n\n    return (\n        <Container className='product-view'>\n            <Grid container spacing={4}>\n                <Grid item xs={12} md={6}>\n                <img className=\"product-view-img\"\n                    onLoad={() => {\n                    setLoading(false);\n                    }}\n                    src={product.src}\n                    alt={product.name}\n                />\n                {loading && <Loader />}\n\n                {product.variant_groups?.length ? (\n                <h4>\n                Select variants.\n                </h4>\n                ) : null}\n                <div className=\"variants colors\">\n                    {product.variant_groups?.length\n                    ? product.variant_groups?.map((group) => (\n                      group.options.map((option) => (\n                        \n                        <>\n                        <Grid key={option.id} container>\n                          <Grid xs={2} md={2} item key={option.id}>\n                            {option.name}\n                          </Grid>\n                        </Grid>\n                        </>\n                  \n                        )\n                      )\n                    ))\n                    : null}\n                </div>\n\n                </Grid>\n                <Grid item xs={12} md={6}>\n                <span className=\"product-view-title\">{product.name}</span>\n                <p className=\"product-description\"\n                    dangerouslySetInnerHTML={createMarkup(product.description)}\n                />\n                <p className=\"product-view-price\">{product.price}</p>\n                <Grid container className=\"product-view-actions\" spacing={4}>\n                    <Grid item xs={12} md={1.5}>\n                    <button\n                        className=\"product-view-qty-btn\"\n                        onClick={() => {\n                        handleQuantity(\"decrease\");\n                        }}\n                    >\n                        -\n                    </button>\n                    </Grid>\n                    <Grid item xs={12} md={1}>\n                    <p className=\"product-view-qty\">\n                        {quantity}\n                    </p>\n                    </Grid>\n                    <Grid item xs={12} md={1.5}>\n                    <button\n                        className=\"product-view-qty-btn\"\n                        onClick={() => {\n                        handleQuantity(\"increase\");\n                        }}\n                    >\n                        +\n                    </button>\n                    </Grid>\n                    <Grid item xs={12}>\n                    <button\n                        className=\"product-view-cart-btn\"\n                        onClick={() => {\n                        addToCart(product.id, quantity, product.option);\n                        }}\n                    >\n                        <span>Add to cart</span> <ShoppingBagOutlinedIcon className=\"bag-icon\"/>\n                    </button>\n                    </Grid>\n                </Grid>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n};\n\n\nexport default ProductView;"],"mappings":"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"},"metadata":{},"sourceType":"module"}