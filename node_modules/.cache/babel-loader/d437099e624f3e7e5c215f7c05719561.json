{"ast":null,"code":"var _jsxFileName = \"/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/src/components/checkout/Payment.js\";\nimport React from 'react';\nimport PaystackPop from '@paystack/inline-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Payment = _ref => {\n  let {\n    user,\n    checkoutData,\n    handleBackStep,\n    handleNextStep,\n    handleCheckout\n  } = _ref;\n\n  const sanitizedLineItems = lineItems => {\n    return lineItems.reduce((data, lineItem) => {\n      const item = data;\n      let variantData = null;\n\n      if (lineItem.selected_options.length) {\n        variantData = {\n          [lineItem.selected_options[0].group_id]: lineItem.selected_options[0].option_id\n        };\n      }\n\n      item[lineItem.id] = {\n        quantity: lineItem.quantity,\n        variants: variantData\n      };\n      return item;\n    }, {});\n  };\n\n  const paystack = new PaystackPop();\n  paystack.newTransaction({\n    key: \"pk_test_0e824463d20818c6550d20220c1cffb88aac11e6\",\n    amount: checkoutData.live.subtotal.raw * 100,\n    firstname: user.firstName,\n    lastname: user.lastName,\n    email: user.email,\n\n    onSuccess(transaction) {\n      let message = `Successfull Reference ${transaction.reference}`;\n      console.log(message);\n      psreference = transaction.reference;\n      console.log(orderData);\n      handleCheckout(checkoutData.id, orderData);\n      handleNextStep(e, \"confirmation\");\n    },\n\n    onCancel() {\n      console.log(\"Transaction canceled.\");\n    }\n\n  });\n\n  const paystackPay = e => {\n    e.preventDefault();\n    console.log(checkoutData);\n    let psreference = \"\";\n    const orderData = {\n      payment: {\n        gateway: \"paystack\",\n        paystack: {\n          payment_method_id: \"gway_Ll2aRZDRkbRE5V\",\n          reference: psreference\n        }\n      },\n      shipping: {\n        name: \"stander\",\n        street: user.address,\n        town_city: user.city,\n        county_state: '' + user.shippingSubdivision.code + '',\n        postal_zip_code: user.postcode,\n        country: '' + user.shippingCountry.code + ''\n      },\n      customer: {\n        firstname: user.firstName,\n        lastname: user.lastName,\n        email: user.email\n      },\n      line_items: sanitizedLineItems(checkoutData.live.line_items),\n      fulfillment: {\n        shipping_method: user.shippingOption.id\n      }\n    };\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: paystackPay,\n      children: [\"Pay \", checkoutData.live.subtotal.formatted_with_symbol]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => handleBackStep(e, \"order-details\"),\n      children: \"Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_c = Payment;\nexport default Payment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","PaystackPop","Payment","user","checkoutData","handleBackStep","handleNextStep","handleCheckout","sanitizedLineItems","lineItems","reduce","data","lineItem","item","variantData","selected_options","length","group_id","option_id","id","quantity","variants","paystack","newTransaction","key","amount","live","subtotal","raw","firstname","firstName","lastname","lastName","email","onSuccess","transaction","message","reference","console","log","psreference","orderData","e","onCancel","paystackPay","preventDefault","payment","gateway","payment_method_id","shipping","name","street","address","town_city","city","county_state","shippingSubdivision","code","postal_zip_code","postcode","country","shippingCountry","customer","line_items","fulfillment","shipping_method","shippingOption","formatted_with_symbol"],"sources":["/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/src/components/checkout/Payment.js"],"sourcesContent":["import React from 'react';\nimport PaystackPop from '@paystack/inline-js';\n\nconst Payment = ({\n    user,\n    checkoutData,\n    handleBackStep,\n    handleNextStep,\n    handleCheckout,\n  }) => {\n\n    const sanitizedLineItems = (lineItems) => {\n        return lineItems.reduce((data, lineItem) => {\n          const item = data;\n          let variantData = null;\n          if (lineItem.selected_options.length) {\n            variantData = {\n              [lineItem.selected_options[0].group_id]: lineItem.selected_options[0].option_id,\n            };\n          }\n          item[lineItem.id] = {\n            quantity: lineItem.quantity,\n            variants: variantData,\n          };\n        return item;\n        }, {});\n      };\n\n    \n      const paystack = new PaystackPop()\n      paystack.newTransaction({\n          key: \"pk_test_0e824463d20818c6550d20220c1cffb88aac11e6\",\n          amount: checkoutData.live.subtotal.raw * 100,\n          firstname: user.firstName,\n          lastname: user.lastName,\n          email: user.email,\n          onSuccess(transaction){\n              let message = `Successfull Reference ${transaction.reference}`\n              console.log(message);\n              psreference = transaction.reference;\n              console.log(orderData);\n              handleCheckout(checkoutData.id, orderData);\n              handleNextStep(e, \"confirmation\");\n          },\n          onCancel(){\n              console.log(\"Transaction canceled.\")\n          }\n      })\n\n    const paystackPay = (e) => {\n        e.preventDefault()\n        console.log(checkoutData)\n        \n\n        let psreference = \"\";\n\n        const orderData = {\n            payment: {\n              gateway: \"paystack\",\n              paystack: {\n                payment_method_id: \"gway_Ll2aRZDRkbRE5V\",\n                reference: psreference\n              },\n            },\n            shipping: {\n              name: \"stander\",\n              street: user.address,\n              town_city: user.city,\n              county_state: '' + user.shippingSubdivision.code  + '',\n              postal_zip_code: user.postcode,\n              country: '' + user.shippingCountry.code + ''\n            },\n            customer: {\n              firstname: user.firstName,\n              lastname: user.lastName,\n              email: user.email,\n            },\n            line_items: sanitizedLineItems(checkoutData.live.line_items),\n            fulfillment: { shipping_method: user.shippingOption.id  }\n          };\n\n\n    }\n\n\n    return (\n        <>\n             <button onClick={paystackPay}>\n                  Pay {checkoutData.live.subtotal.formatted_with_symbol}\n            </button>\n\n            <button\n                  onClick={(e) => handleBackStep(e, \"order-details\")}\n                >\n                  Back\n            </button>\n        </>\n    )\n};\n\n\n\nexport default Payment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}