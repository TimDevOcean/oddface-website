{"ast":null,"code":"var _jsxFileName = \"/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/src/components/checkout/Payment.js\";\nimport React from 'react';\nimport PaystackPop from '@paystack/inline-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Payment = _ref => {\n  let {\n    user,\n    checkoutData,\n    handleBackStep,\n    handleNextStep,\n    handleCheckout\n  } = _ref;\n\n  const sanitizedLineItems = lineItems => {\n    return lineItems.reduce((data, lineItem) => {\n      const item = data;\n      let variantData = null;\n\n      if (lineItem.selected_options.length) {\n        variantData = {\n          [lineItem.selected_options[0].group_id]: lineItem.selected_options[0].option_id\n        };\n      }\n\n      item[lineItem.id] = {\n        quantity: lineItem.quantity,\n        variants: variantData\n      };\n      return item;\n    }, {});\n  };\n\n  const orderSubTotal = checkoutData.live.subtotal.raw + user.shippingOption.price;\n  const totalAmount = orderSubTotal * 100;\n  const currency = checkoutData.live.currency.symbol;\n\n  const paystackPay = e => {\n    e.preventDefault();\n    console.log(checkoutData);\n    const paystack = new PaystackPop();\n    paystack.newTransaction({\n      key: \"pk_test_0e824463d20818c6550d20220c1cffb88aac11e6\",\n      amount: totalAmount,\n      firstname: user.firstName,\n      lastname: user.lastName,\n      email: user.email,\n\n      onSuccess(transaction) {\n        const orderData = {\n          payment: {\n            gateway: \"paystack\",\n            paystack: {\n              payment_method_id: \"gway_6oLdBVDBm94zoX\",\n              reference: transaction.reference\n            }\n          },\n          shipping: {\n            name: user.firstName + \" \" + user.lastName,\n            street: user.address,\n            town_city: user.city,\n            county_state: '' + user.shippingSubdivision.code + '',\n            postal_zip_code: user.postcode,\n            country: '' + user.shippingCountry.code + ''\n          },\n          customer: {\n            firstname: user.firstName,\n            lastname: user.lastName,\n            email: user.email\n          },\n          line_items: sanitizedLineItems(checkoutData.live.line_items),\n          fulfillment: {\n            shipping_method: user.shippingOption.id\n          }\n        }; // let message = `Successfull Reference ${transaction.reference}`\n\n        console.log(paystack);\n        console.log(orderData);\n        handleCheckout(checkoutData.id, orderData);\n        handleNextStep(e, \"confirmation\");\n      },\n\n      onCancel() {\n        console.log(\"Transaction canceled.\");\n      }\n\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"actions\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => handleBackStep(e, \"order-details\"),\n      children: \"Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: paystackPay,\n      children: [\"Pay \", currency, orderSubTotal.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n};\n\n_c = Payment;\nexport default Payment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","PaystackPop","Payment","user","checkoutData","handleBackStep","handleNextStep","handleCheckout","sanitizedLineItems","lineItems","reduce","data","lineItem","item","variantData","selected_options","length","group_id","option_id","id","quantity","variants","orderSubTotal","live","subtotal","raw","shippingOption","price","totalAmount","currency","symbol","paystackPay","e","preventDefault","console","log","paystack","newTransaction","key","amount","firstname","firstName","lastname","lastName","email","onSuccess","transaction","orderData","payment","gateway","payment_method_id","reference","shipping","name","street","address","town_city","city","county_state","shippingSubdivision","code","postal_zip_code","postcode","country","shippingCountry","customer","line_items","fulfillment","shipping_method","onCancel","toFixed"],"sources":["/Users/TIM/Desktop/DEXTOP/CODE PROJECTS/oddface/src/components/checkout/Payment.js"],"sourcesContent":["import React from 'react';\nimport PaystackPop from '@paystack/inline-js';\n\nconst Payment = ({\n    user,\n    checkoutData,\n    handleBackStep,\n    handleNextStep,\n    handleCheckout\n  }) => {\n  \n\n    const sanitizedLineItems = (lineItems) => {\n        return lineItems.reduce((data, lineItem) => {\n          const item = data;\n          let variantData = null;\n          if (lineItem.selected_options.length) {\n            variantData = {\n              [lineItem.selected_options[0].group_id]: lineItem.selected_options[0].option_id,\n            };\n          }\n          item[lineItem.id] = {\n            quantity: lineItem.quantity,\n            variants: variantData,\n          };\n        return item;\n        }, {});\n      };\n\n    const orderSubTotal =  checkoutData.live.subtotal.raw + user.shippingOption.price\n    const totalAmount =  orderSubTotal * 100;\n    const currency = checkoutData.live.currency.symbol;\n\n\n\n    const paystackPay = (e) => {\n        e.preventDefault()\n        console.log(checkoutData);\n        \n        const paystack = new PaystackPop();\n        paystack.newTransaction({\n            key: \"pk_test_0e824463d20818c6550d20220c1cffb88aac11e6\",\n            amount: totalAmount,\n            firstname: user.firstName,\n            lastname: user.lastName,\n            email: user.email,\n            onSuccess(transaction){\n\n                const orderData = {\n                    payment: {\n                      gateway: \"paystack\",\n                      paystack: {\n                        payment_method_id: \"gway_6oLdBVDBm94zoX\",\n                        reference: transaction.reference,\n                      },\n                    },\n                    shipping: {\n                      name: user.firstName + \" \" + user.lastName,\n                      street: user.address,\n                      town_city: user.city,\n                      county_state: '' + user.shippingSubdivision.code  + '',\n                      postal_zip_code: user.postcode,\n                      country: '' + user.shippingCountry.code + ''\n                    },\n                    customer: {\n                      firstname: user.firstName,\n                      lastname: user.lastName,\n                      email: user.email,\n                    },\n                    line_items: sanitizedLineItems(checkoutData.live.line_items),\n                    fulfillment: { shipping_method: user.shippingOption.id  }\n                  };\n                  \n\n                // let message = `Successfull Reference ${transaction.reference}`\n                console.log(paystack);\n                console.log(orderData);\n                handleCheckout(checkoutData.id, orderData);\n                handleNextStep(e, \"confirmation\");\n            },\n            onCancel(){\n                console.log(\"Transaction canceled.\")\n            }\n        })\n\n    }\n\n\n    return (\n        <div className='actions'>\n            <button\n                  onClick={(e) => handleBackStep(e, \"order-details\")}\n                >\n                  Back\n            </button>\n\n            <button onClick={paystackPay}>\n                  Pay {currency}{orderSubTotal.toFixed(2)}\n            </button>\n        </div>\n    )\n};\n\n\n\nexport default Payment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}